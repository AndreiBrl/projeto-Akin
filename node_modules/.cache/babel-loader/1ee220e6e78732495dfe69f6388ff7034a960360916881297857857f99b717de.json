{"ast":null,"code":"import _objectSpread from\"C:/Users/barbu/Desktop/projeto-Akin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/barbu/Desktop/projeto-Akin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from'react';import{ReactReader,ReactReaderStyle}from'react-reader';import menuLeitura from'../img/capaEdit.png';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var LeituraEPUB=function LeituraEPUB(){// Substitua com o caminho real para o seu arquivo EPUB\nvar epubUrl='https://magical-marzipan-1029e1.netlify.app/Original - Andrei Barbuto.epub';var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),TotcurrentLocation=_useState2[0],setTotCurrentLocation=_useState2[1];var _useState3=useState(2),_useState4=_slicedToArray(_useState3,2),changeZIndex=_useState4[0],setChangeZindex=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),flag=_useState6[0],setFlag=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),page=_useState8[0],setPage=_useState8[1];var _useState9=useState('n/a'),_useState10=_slicedToArray(_useState9,2),chapter=_useState10[0],setChapter=_useState10[1];var rendition=useRef();var toc=useRef([]);useEffect(function(){// Recupere a localização do localStorage ao montar o componente\nvar savedLocation=localStorage.getItem('epubLocation');if(savedLocation){setTotCurrentLocation(savedLocation);setFlag(false);}},[]);useEffect(function(){// Atualize as informações da página e do capítulo sempre que houver uma mudança de localização\nif(rendition.current){var _rendition$current$lo=rendition.current.location.start,displayed=_rendition$current$lo.displayed,href=_rendition$current$lo.href;// Recupere o capítulo correspondente da tabela de conteúdos (TOC)\nvar chapterItem=toc.current.find(function(item){return item.href===href;});setChapter(chapterItem?chapterItem.label:'n/a');setPage(/*#__PURE__*/_jsxs(\"h1\",{className:\"pagina\",children:[\" \",chapterItem.label,\" - \",displayed.page,\" de \",displayed.total]}));console.log(chapterItem);}},[TotcurrentLocation,toc.current]);var handleLocation=function handleLocation(location){if(location!=='epubcfi(/6/4!/4/2/1:0)'){console.log(location);setFlag(false);setTotCurrentLocation(location.toString());// Salve a localização no localStorage\nlocalStorage.setItem('epubLocation',location.toString());}};return/*#__PURE__*/_jsxs(\"div\",{className:\"containerLeitura\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"menuLeitura\",children:/*#__PURE__*/_jsx(\"img\",{src:menuLeitura,style:{zIndex:changeZIndex}})}),/*#__PURE__*/_jsx(\"div\",{className:\"pag\",children:page}),flag?/*#__PURE__*/_jsx(ReactReader,{url:epubUrl,locationChanged:function locationChanged(location){return handleLocation(location);},showToc:true}):/*#__PURE__*/_jsx(ReactReader,{url:epubUrl,locationChanged:function locationChanged(location){return handleLocation(location);},location:TotcurrentLocation,getRendition:function getRendition(rend){return rendition.current=rend;},tocChanged:function tocChanged(tocData){return toc.current=tocData;},page:page// Adicionando o estado da página\n,chapter:chapter// Adicionando o estado do capítulo\n,readerStyles:_objectSpread(_objectSpread({},ReactReaderStyle),{},{container:_objectSpread({backgroundColor:'#F4E2C7'},ReactReaderStyle.container),tocArea:_objectSpread(_objectSpread({},ReactReaderStyle.tocArea),{},{marginTop:'5vw',height:'150vw',color:'#522828'}),tocButton:_objectSpread(_objectSpread({},ReactReaderStyle.tocButton),{},{marginTop:'7vw'}),readerArea:_objectSpread(_objectSpread({},ReactReaderStyle.readerArea),{},{marginTop:'-5vw',backgroundColor:'#F4E2C7'}),reader:_objectSpread(_objectSpread({},ReactReaderStyle.reader),{},{backgroundColor:'#F4E2C7'}),arrow:_objectSpread(_objectSpread({},ReactReaderStyle.arrow),{},{backgroundColor:'#F4E2C7',color:'#522828'}),tocButtonBottom:_objectSpread(_objectSpread({},ReactReaderStyle.tocButtonBottom),{},{backgroundColor:'#522828'}),tocButtonBarTop:_objectSpread(_objectSpread({},ReactReaderStyle.tocButtonBarTop),{},{backgroundColor:'#522828'})}),showToc:true})]});};export default LeituraEPUB;","map":{"version":3,"names":["React","useState","useEffect","useRef","ReactReader","ReactReaderStyle","menuLeitura","jsxs","_jsxs","jsx","_jsx","LeituraEPUB","epubUrl","_useState","_useState2","_slicedToArray","TotcurrentLocation","setTotCurrentLocation","_useState3","_useState4","changeZIndex","setChangeZindex","_useState5","_useState6","flag","setFlag","_useState7","_useState8","page","setPage","_useState9","_useState10","chapter","setChapter","rendition","toc","savedLocation","localStorage","getItem","current","_rendition$current$lo","location","start","displayed","href","chapterItem","find","item","label","className","children","total","console","log","handleLocation","toString","setItem","src","style","zIndex","url","locationChanged","showToc","getRendition","rend","tocChanged","tocData","readerStyles","_objectSpread","container","backgroundColor","tocArea","marginTop","height","color","tocButton","readerArea","reader","arrow","tocButtonBottom","tocButtonBarTop"],"sources":["C:/Users/barbu/Desktop/projeto-Akin/src/components/pages/Leitura.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { ReactReader, ReactReaderStyle } from 'react-reader';\r\nimport menuLeitura from '../img/capaEdit.png';\r\n\r\n\r\nconst LeituraEPUB = () => {\r\n    // Substitua com o caminho real para o seu arquivo EPUB\r\n    const epubUrl = 'https://magical-marzipan-1029e1.netlify.app/Original - Andrei Barbuto.epub';\r\n    const [TotcurrentLocation, setTotCurrentLocation] = useState(\"\");\r\n    const [changeZIndex, setChangeZindex] = useState(2)\r\n    const [flag, setFlag] = useState(true);\r\n\r\n    const [page, setPage] = useState('');\r\n    const [chapter, setChapter] = useState('n/a');\r\n    const rendition = useRef();\r\n    const toc = useRef([]);\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        // Recupere a localização do localStorage ao montar o componente\r\n        const savedLocation = localStorage.getItem('epubLocation');\r\n        if (savedLocation) {\r\n            setTotCurrentLocation(savedLocation);\r\n            setFlag(false);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        // Atualize as informações da página e do capítulo sempre que houver uma mudança de localização\r\n        if (rendition.current) {\r\n            const { displayed, href } = rendition.current.location.start;\r\n            // Recupere o capítulo correspondente da tabela de conteúdos (TOC)\r\n            const chapterItem = toc.current.find(item => item.href === href);\r\n            setChapter(chapterItem ? chapterItem.label : 'n/a');\r\n            setPage(<h1 className='pagina'> {chapterItem.label} - {displayed.page} de {displayed.total}</h1>);\r\n            console.log(chapterItem);\r\n\r\n        }\r\n        \r\n    }, [TotcurrentLocation, toc.current]);\r\n\r\n\r\n\r\n    const handleLocation = (location) => {\r\n        if (location !== 'epubcfi(/6/4!/4/2/1:0)') {\r\n            console.log(location);\r\n            setFlag(false);\r\n            setTotCurrentLocation(location.toString());\r\n            // Salve a localização no localStorage\r\n            localStorage.setItem('epubLocation', location.toString());\r\n            \r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"containerLeitura\">\r\n            <div className='menuLeitura'>\r\n\r\n                <img src={menuLeitura} style={{ zIndex: changeZIndex }} />\r\n            </div>\r\n            <div className='pag'>\r\n                {page}\r\n\r\n            </div>\r\n            {/* flag criada por conta de que a propriedade location da bug na primeira rendezação de tela. Segundo a própria documentação a funcao \r\nlocation é executada inevitavelmente assim que entra na tela.\r\n*/}\r\n\r\n            {flag ? (\r\n                <ReactReader\r\n                    url={epubUrl}\r\n\r\n\r\n                    locationChanged={(location) => handleLocation(location)}\r\n                    showToc={true}\r\n                />\r\n            ) : (\r\n                <ReactReader\r\n                    url={epubUrl}\r\n\r\n                    locationChanged={(location) => handleLocation(location)}\r\n\r\n                    location={TotcurrentLocation}\r\n                    getRendition={(rend) => (rendition.current = rend)}\r\n                    tocChanged={(tocData) => (toc.current = tocData)}\r\n                    page={page} // Adicionando o estado da página\r\n                    chapter={chapter} // Adicionando o estado do capítulo\r\n                    readerStyles={{\r\n                        ...ReactReaderStyle,\r\n                        container: {\r\n                            backgroundColor: '#F4E2C7',\r\n                            ...ReactReaderStyle.container,\r\n                        },\r\n                        tocArea: {\r\n                            ...ReactReaderStyle.tocArea,\r\n                            marginTop: '5vw',\r\n                            height: '150vw',\r\n                            color: '#522828',\r\n                        },\r\n                        tocButton: {\r\n                            ...ReactReaderStyle.tocButton,\r\n                            marginTop: '7vw',\r\n\r\n\r\n                        },\r\n                        readerArea: {\r\n                            ...ReactReaderStyle.readerArea,\r\n                            marginTop: '-5vw',\r\n                            backgroundColor: '#F4E2C7',\r\n\r\n\r\n                        },\r\n                        reader: {\r\n                            ...ReactReaderStyle.reader,\r\n                            backgroundColor: '#F4E2C7',\r\n\r\n\r\n\r\n\r\n                        },\r\n                        arrow: {\r\n                            ...ReactReaderStyle.arrow,\r\n                            backgroundColor: '#F4E2C7',\r\n                            color: '#522828',\r\n\r\n\r\n                        },\r\n                        tocButtonBottom: {\r\n                            ...ReactReaderStyle.tocButtonBottom,\r\n                            backgroundColor: '#522828'\r\n                        },\r\n                        tocButtonBarTop: {\r\n                            ...ReactReaderStyle.tocButtonBarTop,\r\n                            backgroundColor: '#522828'\r\n                        }\r\n\r\n\r\n\r\n\r\n\r\n                    }}\r\n\r\n                    showToc={true}\r\n\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LeituraEPUB;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}