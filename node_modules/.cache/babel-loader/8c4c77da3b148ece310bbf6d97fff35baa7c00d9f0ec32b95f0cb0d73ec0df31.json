{"ast":null,"code":"import _objectWithoutProperties from \"C:/Users/barbu/Desktop/projeto-Akin/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _objectSpread from \"C:/Users/barbu/Desktop/projeto-Akin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"C:/Users/barbu/Desktop/projeto-Akin/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/barbu/Desktop/projeto-Akin/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"C:/Users/barbu/Desktop/projeto-Akin/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"C:/Users/barbu/Desktop/projeto-Akin/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/barbu/Desktop/projeto-Akin/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nvar _excluded = [\"title\", \"showToc\", \"loadingView\", \"readerStyles\", \"locationChanged\", \"swipeable\", \"epubViewStyles\"];\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = function __defNormalProp(obj, key, value) {\n  return key in obj ? __defProp(obj, key, {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: value\n  }) : obj[key] = value;\n};\nvar __publicField = function __publicField(obj, key, value) {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nimport React, { Component, PureComponent } from \"react\";\nimport Epub from \"epubjs\";\nimport { useSwipeable } from \"react-swipeable\";\nvar EpubViewStyle = {\n  viewHolder: {\n    position: \"relative\",\n    height: \"100%\",\n    width: \"100%\"\n  },\n  view: {\n    height: \"100%\"\n  }\n};\nvar EpubView = /*#__PURE__*/function (_Component) {\n  _inherits(EpubView, _Component);\n  var _super = _createSuper(EpubView);\n  function EpubView(props) {\n    var _this;\n    _classCallCheck(this, EpubView);\n    _this = _super.call(this, props);\n    __publicField(_assertThisInitialized(_this), \"state\", {\n      isLoaded: false,\n      toc: []\n    });\n    __publicField(_assertThisInitialized(_this), \"viewerRef\", React.createRef());\n    __publicField(_assertThisInitialized(_this), \"location\");\n    __publicField(_assertThisInitialized(_this), \"book\");\n    __publicField(_assertThisInitialized(_this), \"rendition\");\n    __publicField(_assertThisInitialized(_this), \"prevPage\");\n    __publicField(_assertThisInitialized(_this), \"nextPage\");\n    __publicField(_assertThisInitialized(_this), \"onLocationChange\", function (loc) {\n      var _this$props = _this.props,\n        location = _this$props.location,\n        locationChanged = _this$props.locationChanged;\n      var newLocation = \"\".concat(loc.start);\n      if (location !== newLocation) {\n        _this.location = newLocation;\n        locationChanged && locationChanged(newLocation);\n      }\n    });\n    __publicField(_assertThisInitialized(_this), \"handleKeyPress\", function (event) {\n      if (event.key === \"ArrowRight\" && _this.nextPage) {\n        _this.nextPage();\n      }\n      if (event.key === \"ArrowLeft\" && _this.prevPage) {\n        _this.prevPage();\n      }\n    });\n    _this.location = props.location;\n    _this.book = _this.rendition = _this.prevPage = _this.nextPage = void 0;\n    return _this;\n  }\n  _createClass(EpubView, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initBook();\n      document.addEventListener(\"keyup\", this.handleKeyPress, false);\n    }\n  }, {\n    key: \"initBook\",\n    value: function initBook() {\n      var _this2 = this;\n      var _this$props2 = this.props,\n        url = _this$props2.url,\n        tocChanged = _this$props2.tocChanged,\n        epubInitOptions = _this$props2.epubInitOptions;\n      if (this.book) {\n        this.book.destroy();\n      }\n      this.book = Epub(url, epubInitOptions);\n      this.book.loaded.navigation.then(function (_ref) {\n        var toc = _ref.toc;\n        _this2.setState({\n          isLoaded: true,\n          toc: toc\n        }, function () {\n          tocChanged && tocChanged(toc);\n          _this2.initReader();\n        });\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.book) {\n        this.book.destroy();\n      }\n      this.book = this.rendition = this.prevPage = this.nextPage = void 0;\n      document.removeEventListener(\"keyup\", this.handleKeyPress, false);\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return !this.state.isLoaded || nextProps.location !== this.props.location || nextProps.url !== this.props.url;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _a;\n      if (prevProps.location !== this.props.location && this.location !== this.props.location) {\n        (_a = this.rendition) == null ? void 0 : _a.display(this.props.location + \"\");\n      }\n      if (prevProps.url !== this.props.url) {\n        this.initBook();\n      }\n    }\n  }, {\n    key: \"initReader\",\n    value: function initReader() {\n      var toc = this.state.toc;\n      var _this$props3 = this.props,\n        location = _this$props3.location,\n        epubOptions = _this$props3.epubOptions,\n        getRendition = _this$props3.getRendition;\n      if (this.viewerRef.current) {\n        var node = this.viewerRef.current;\n        if (this.book) {\n          var rendition = this.book.renderTo(node, _objectSpread({\n            width: \"100%\",\n            height: \"100%\"\n          }, epubOptions));\n          this.rendition = rendition;\n          this.prevPage = function () {\n            rendition.prev();\n          };\n          this.nextPage = function () {\n            rendition.next();\n          };\n          this.registerEvents();\n          getRendition && getRendition(rendition);\n          if (typeof location === \"string\" || typeof location === \"number\") {\n            rendition.display(location + \"\");\n          } else if (toc.length > 0 && toc[0].href) {\n            rendition.display(toc[0].href);\n          } else {\n            rendition.display();\n          }\n        }\n      }\n    }\n  }, {\n    key: \"registerEvents\",\n    value: function registerEvents() {\n      var _this$props4 = this.props,\n        handleKeyPress = _this$props4.handleKeyPress,\n        handleTextSelected = _this$props4.handleTextSelected;\n      if (this.rendition) {\n        this.rendition.on(\"locationChanged\", this.onLocationChange);\n        this.rendition.on(\"keyup\", handleKeyPress || this.handleKeyPress);\n        if (handleTextSelected) {\n          this.rendition.on(\"selected\", handleTextSelected);\n        }\n      }\n    }\n  }, {\n    key: \"renderBook\",\n    value: function renderBook() {\n      var _this$props$epubViewS = this.props.epubViewStyles,\n        epubViewStyles = _this$props$epubViewS === void 0 ? EpubViewStyle : _this$props$epubViewS;\n      return /* @__PURE__ */jsx(\"div\", {\n        ref: this.viewerRef,\n        style: epubViewStyles.view\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var isLoaded = this.state.isLoaded;\n      var _this$props5 = this.props,\n        _this$props5$loadingV = _this$props5.loadingView,\n        loadingView = _this$props5$loadingV === void 0 ? null : _this$props5$loadingV,\n        _this$props5$epubView = _this$props5.epubViewStyles,\n        epubViewStyles = _this$props5$epubView === void 0 ? EpubViewStyle : _this$props5$epubView;\n      return /* @__PURE__ */jsx(\"div\", {\n        style: epubViewStyles.viewHolder,\n        children: isLoaded && this.renderBook() || loadingView\n      });\n    }\n  }]);\n  return EpubView;\n}(Component);\nvar ReactReaderStyle = {\n  container: {\n    overflow: \"hidden\",\n    position: \"relative\",\n    height: \"100%\"\n  },\n  readerArea: {\n    position: \"relative\",\n    zIndex: 1,\n    height: \"100%\",\n    width: \"100%\",\n    backgroundColor: \"#fff\",\n    transition: \"all .3s ease\"\n  },\n  containerExpanded: {\n    transform: \"translateX(256px)\"\n  },\n  titleArea: {\n    position: \"absolute\",\n    top: 20,\n    left: 50,\n    right: 50,\n    textAlign: \"center\",\n    color: \"#999\"\n  },\n  reader: {\n    position: \"absolute\",\n    top: 50,\n    left: 50,\n    bottom: 20,\n    right: 50\n  },\n  swipeWrapper: {\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 200\n  },\n  prev: {\n    left: 1\n  },\n  next: {\n    right: 1\n  },\n  arrow: {\n    outline: \"none\",\n    border: \"none\",\n    background: \"none\",\n    position: \"absolute\",\n    top: \"50%\",\n    marginTop: -32,\n    fontSize: 64,\n    padding: \"0 10px\",\n    color: \"#E2E2E2\",\n    fontFamily: \"arial, sans-serif\",\n    cursor: \"pointer\",\n    userSelect: \"none\",\n    appearance: \"none\",\n    fontWeight: \"normal\"\n  },\n  arrowHover: {\n    color: \"#777\"\n  },\n  toc: {},\n  tocBackground: {\n    position: \"absolute\",\n    left: 256,\n    top: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 1\n  },\n  tocArea: {\n    position: \"absolute\",\n    left: 0,\n    top: 0,\n    bottom: 0,\n    zIndex: 0,\n    width: 256,\n    overflowY: \"auto\",\n    WebkitOverflowScrolling: \"touch\",\n    background: \"#f2f2f2\",\n    padding: \"10px 0\"\n  },\n  tocAreaButton: {\n    userSelect: \"none\",\n    appearance: \"none\",\n    background: \"none\",\n    border: \"none\",\n    display: \"block\",\n    fontFamily: \"sans-serif\",\n    width: \"100%\",\n    fontSize: \".9em\",\n    textAlign: \"left\",\n    padding: \".9em 1em\",\n    borderBottom: \"1px solid #ddd\",\n    color: \"#aaa\",\n    boxSizing: \"border-box\",\n    outline: \"none\",\n    cursor: \"pointer\"\n  },\n  tocButton: {\n    background: \"none\",\n    border: \"none\",\n    width: 32,\n    height: 32,\n    position: \"absolute\",\n    top: 10,\n    left: 10,\n    borderRadius: 2,\n    outline: \"none\",\n    cursor: \"pointer\"\n  },\n  tocButtonExpanded: {\n    background: \"#f2f2f2\"\n  },\n  tocButtonBar: {\n    position: \"absolute\",\n    width: \"60%\",\n    background: \"#ccc\",\n    height: 2,\n    left: \"50%\",\n    margin: \"-1px -30%\",\n    top: \"50%\",\n    transition: \"all .5s ease\"\n  },\n  tocButtonBarTop: {\n    top: \"35%\"\n  },\n  tocButtonBottom: {\n    top: \"66%\"\n  },\n  loadingView: {\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"10%\",\n    right: \"10%\",\n    color: \"#ccc\",\n    textAlign: \"center\",\n    marginTop: \"-.5em\"\n  }\n};\nvar SwipeWrapper = function SwipeWrapper(_ref2) {\n  var children = _ref2.children,\n    swipeProps = _ref2.swipeProps;\n  var handlers = useSwipeable(swipeProps);\n  return /* @__PURE__ */jsx(\"div\", _objectSpread(_objectSpread({}, handlers), {}, {\n    children: children\n  }));\n};\nvar TocItem = function TocItem(_ref3) {\n  var data = _ref3.data,\n    setLocation = _ref3.setLocation,\n    styles = _ref3.styles;\n  return /* @__PURE__ */jsxs(\"div\", {\n    children: [/* @__PURE__ */jsx(\"button\", {\n      onClick: function onClick() {\n        return setLocation(data.href);\n      },\n      style: styles,\n      children: data.label\n    }), data.subitems && data.subitems.length > 0 && /* @__PURE__ */jsx(\"div\", {\n      style: {\n        paddingLeft: 10\n      },\n      children: data.subitems.map(function (item, i) {\n        return /* @__PURE__ */jsx(TocItem, {\n          data: item,\n          styles: styles,\n          setLocation: setLocation\n        }, i);\n      })\n    })]\n  });\n};\nvar ReactReader = /*#__PURE__*/function (_PureComponent) {\n  _inherits(ReactReader, _PureComponent);\n  var _super2 = _createSuper(ReactReader);\n  function ReactReader(props) {\n    var _this3;\n    _classCallCheck(this, ReactReader);\n    _this3 = _super2.call(this, props);\n    __publicField(_assertThisInitialized(_this3), \"state\", {\n      isLoaded: false,\n      expandedToc: false,\n      toc: []\n    });\n    __publicField(_assertThisInitialized(_this3), \"readerRef\", React.createRef());\n    __publicField(_assertThisInitialized(_this3), \"toggleToc\", function () {\n      _this3.setState({\n        expandedToc: !_this3.state.expandedToc\n      });\n    });\n    __publicField(_assertThisInitialized(_this3), \"next\", function () {\n      var node = _this3.readerRef.current;\n      if (node && node.nextPage) {\n        node.nextPage();\n      }\n    });\n    __publicField(_assertThisInitialized(_this3), \"prev\", function () {\n      var node = _this3.readerRef.current;\n      if (node && node.prevPage) {\n        node.prevPage();\n      }\n    });\n    __publicField(_assertThisInitialized(_this3), \"onTocChange\", function (toc) {\n      var tocChanged = _this3.props.tocChanged;\n      _this3.setState({\n        toc: toc\n      }, function () {\n        return tocChanged && tocChanged(toc);\n      });\n    });\n    __publicField(_assertThisInitialized(_this3), \"setLocation\", function (loc) {\n      var locationChanged = _this3.props.locationChanged;\n      _this3.setState({\n        expandedToc: false\n      }, function () {\n        return locationChanged && locationChanged(loc);\n      });\n    });\n    return _this3;\n  }\n  _createClass(ReactReader, [{\n    key: \"renderToc\",\n    value: function renderToc() {\n      var _this4 = this;\n      var _this$state = this.state,\n        toc = _this$state.toc,\n        expandedToc = _this$state.expandedToc;\n      var _this$props$readerSty = this.props.readerStyles,\n        readerStyles = _this$props$readerSty === void 0 ? ReactReaderStyle : _this$props$readerSty;\n      return /* @__PURE__ */jsxs(\"div\", {\n        children: [/* @__PURE__ */jsx(\"div\", {\n          style: readerStyles.tocArea,\n          children: /* @__PURE__ */jsx(\"div\", {\n            style: readerStyles.toc,\n            children: toc.map(function (item, i) {\n              return /* @__PURE__ */jsx(TocItem, {\n                data: item,\n                setLocation: _this4.setLocation,\n                styles: readerStyles.tocAreaButton\n              }, i);\n            })\n          })\n        }), expandedToc && /* @__PURE__ */jsx(\"div\", {\n          style: readerStyles.tocBackground,\n          onClick: this.toggleToc\n        })]\n      });\n    }\n  }, {\n    key: \"renderTocToggle\",\n    value: function renderTocToggle() {\n      var expandedToc = this.state.expandedToc;\n      var _this$props$readerSty2 = this.props.readerStyles,\n        readerStyles = _this$props$readerSty2 === void 0 ? ReactReaderStyle : _this$props$readerSty2;\n      return /* @__PURE__ */jsxs(\"button\", {\n        style: Object.assign({}, readerStyles.tocButton, expandedToc ? readerStyles.tocButtonExpanded : {}),\n        onClick: this.toggleToc,\n        children: [/* @__PURE__ */jsx(\"span\", {\n          style: Object.assign({}, readerStyles.tocButtonBar, readerStyles.tocButtonBarTop)\n        }), /* @__PURE__ */jsx(\"span\", {\n          style: Object.assign({}, readerStyles.tocButtonBar, readerStyles.tocButtonBottom)\n        })]\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props6 = this.props,\n        title = _this$props6.title,\n        _this$props6$showToc = _this$props6.showToc,\n        showToc = _this$props6$showToc === void 0 ? true : _this$props6$showToc,\n        loadingView = _this$props6.loadingView,\n        _this$props6$readerSt = _this$props6.readerStyles,\n        readerStyles = _this$props6$readerSt === void 0 ? ReactReaderStyle : _this$props6$readerSt,\n        locationChanged = _this$props6.locationChanged,\n        swipeable = _this$props6.swipeable,\n        epubViewStyles = _this$props6.epubViewStyles,\n        props = _objectWithoutProperties(_this$props6, _excluded);\n      var _this$state2 = this.state,\n        toc = _this$state2.toc,\n        expandedToc = _this$state2.expandedToc;\n      return /* @__PURE__ */jsxs(\"div\", {\n        style: readerStyles.container,\n        children: [/* @__PURE__ */jsxs(\"div\", {\n          style: Object.assign({}, readerStyles.readerArea, expandedToc ? readerStyles.containerExpanded : {}),\n          children: [showToc && this.renderTocToggle(), /* @__PURE__ */jsx(\"div\", {\n            style: readerStyles.titleArea,\n            children: title\n          }), /* @__PURE__ */jsx(SwipeWrapper, {\n            swipeProps: {\n              onSwipedRight: this.prev,\n              onSwipedLeft: this.next,\n              trackMouse: true\n            },\n            children: /* @__PURE__ */jsxs(\"div\", {\n              style: readerStyles.reader,\n              children: [/* @__PURE__ */jsx(EpubView, _objectSpread(_objectSpread({\n                ref: this.readerRef,\n                loadingView: loadingView === void 0 ? /* @__PURE__ */jsx(\"div\", {\n                  style: readerStyles.loadingView,\n                  children: \"Loading…\"\n                }) : loadingView,\n                epubViewStyles: epubViewStyles\n              }, props), {}, {\n                tocChanged: this.onTocChange,\n                locationChanged: locationChanged\n              })), swipeable && /* @__PURE__ */jsx(\"div\", {\n                style: readerStyles.swipeWrapper\n              })]\n            })\n          }), /* @__PURE__ */jsx(\"button\", {\n            style: Object.assign({}, readerStyles.arrow, readerStyles.prev),\n            onClick: this.prev,\n            children: \"‹\"\n          }), /* @__PURE__ */jsx(\"button\", {\n            style: Object.assign({}, readerStyles.arrow, readerStyles.next),\n            onClick: this.next,\n            children: \"›\"\n          })]\n        }), showToc && toc && this.renderToc()]\n      });\n    }\n  }]);\n  return ReactReader;\n}(PureComponent);\nexport { EpubView, EpubViewStyle, ReactReader, ReactReaderStyle };","map":{"version":3,"names":["EpubViewStyle","viewHolder","position","height","width","view","EpubView","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","__publicField","_assertThisInitialized","isLoaded","toc","React","createRef","loc","_this$props","location","locationChanged","newLocation","concat","start","event","key","nextPage","prevPage","book","rendition","_createClass","value","componentDidMount","initBook","document","addEventListener","handleKeyPress","_this2","_this$props2","url","tocChanged","epubInitOptions","destroy","Epub","loaded","navigation","then","_ref","setState","initReader","componentWillUnmount","removeEventListener","shouldComponentUpdate","nextProps","state","componentDidUpdate","prevProps","_a","display","_this$props3","epubOptions","getRendition","viewerRef","current","node","renderTo","_objectSpread","prev","next","registerEvents","length","href","_this$props4","handleTextSelected","on","onLocationChange","renderBook","_this$props$epubViewS","epubViewStyles","jsx","ref","style","render","_this$props5","_this$props5$loadingV","loadingView","_this$props5$epubView","children","Component","ReactReaderStyle","container","overflow","readerArea","zIndex","backgroundColor","transition","containerExpanded","transform","titleArea","top","left","right","textAlign","color","reader","bottom","swipeWrapper","arrow","outline","border","background","marginTop","fontSize","padding","fontFamily","cursor","userSelect","appearance","fontWeight","arrowHover","tocBackground","tocArea","overflowY","WebkitOverflowScrolling","tocAreaButton","borderBottom","boxSizing","tocButton","borderRadius","tocButtonExpanded","tocButtonBar","margin","tocButtonBarTop","tocButtonBottom","SwipeWrapper","_ref2","swipeProps","handlers","useSwipeable","TocItem","_ref3","data","setLocation","styles","jsxs","onClick","label","subitems","paddingLeft","map","item","i","ReactReader","_PureComponent","_super2","_this3","expandedToc","readerRef","renderToc","_this4","_this$state","_this$props$readerSty","readerStyles","toggleToc","renderTocToggle","_this$props$readerSty2","Object","assign","_this$props6","title","_this$props6$showToc","showToc","_this$props6$readerSt","swipeable","_objectWithoutProperties","_excluded","_this$state2","onSwipedRight","onSwipedLeft","trackMouse","onTocChange","PureComponent"],"sources":["C:\\Users\\barbu\\Desktop\\projeto-Akin\\node_modules\\react-reader\\src\\lib\\EpubView\\style.ts","C:\\Users\\barbu\\Desktop\\projeto-Akin\\node_modules\\react-reader\\src\\lib\\EpubView\\EpubView.tsx","C:\\Users\\barbu\\Desktop\\projeto-Akin\\node_modules\\react-reader\\src\\lib\\ReactReader\\style.ts","C:\\Users\\barbu\\Desktop\\projeto-Akin\\node_modules\\react-reader\\src\\lib\\ReactReader\\ReactReader.tsx"],"sourcesContent":["import type { CSSProperties } from 'react'\n\nexport interface IEpubViewStyle {\n  viewHolder: CSSProperties\n  view: CSSProperties\n}\n\nexport const EpubViewStyle: IEpubViewStyle = {\n  viewHolder: {\n    position: 'relative',\n    height: '100%',\n    width: '100%',\n  },\n  view: {\n    height: '100%',\n  },\n}\n","import React, { Component } from 'react'\nimport Epub, { Book } from 'epubjs'\nimport type { NavItem, Contents, Rendition, Location } from 'epubjs'\nimport { EpubViewStyle as defaultStyles, type IEpubViewStyle } from './style'\nimport type { RenditionOptions } from 'epubjs/types/rendition'\nimport type { BookOptions } from 'epubjs/types/book'\n\nexport type RenditionOptionsFix = RenditionOptions & {\n  allowPopups: boolean\n}\n\nexport type IToc = {\n  label: string\n  href: string\n}\n\nexport type IEpubViewProps = {\n  url: string | ArrayBuffer\n  epubInitOptions?: Partial<BookOptions>\n  epubOptions?: Partial<RenditionOptionsFix>\n  epubViewStyles?: IEpubViewStyle\n  loadingView?: React.ReactNode\n  location: string | number | null\n  locationChanged(value: string): void\n  showToc?: boolean\n  tocChanged?(value: NavItem[]): void\n  getRendition?(rendition: Rendition): void\n  handleKeyPress?(): void\n  handleTextSelected?(cfiRange: string, contents: Contents): void\n}\ntype IEpubViewState = {\n  isLoaded: boolean\n  toc: NavItem[]\n}\n\nexport class EpubView extends Component<IEpubViewProps, IEpubViewState> {\n  state: Readonly<IEpubViewState> = {\n    isLoaded: false,\n    toc: [],\n  }\n  viewerRef = React.createRef<HTMLDivElement>()\n  location?: string | number | null\n  book?: Book\n  rendition?: Rendition\n  prevPage?: () => void\n  nextPage?: () => void\n\n  constructor(props: IEpubViewProps) {\n    super(props)\n    this.location = props.location\n    this.book = this.rendition = this.prevPage = this.nextPage = undefined\n  }\n\n  componentDidMount() {\n    this.initBook()\n    document.addEventListener('keyup', this.handleKeyPress, false)\n  }\n\n  initBook() {\n    const { url, tocChanged, epubInitOptions } = this.props\n    if (this.book) {\n      this.book.destroy()\n    }\n    this.book = Epub(url, epubInitOptions)\n    this.book.loaded.navigation.then(({ toc }) => {\n      this.setState(\n        {\n          isLoaded: true,\n          toc: toc,\n        },\n        () => {\n          tocChanged && tocChanged(toc)\n          this.initReader()\n        }\n      )\n    })\n  }\n\n  componentWillUnmount() {\n    if (this.book) {\n      this.book.destroy()\n    }\n    this.book = this.rendition = this.prevPage = this.nextPage = undefined\n    document.removeEventListener('keyup', this.handleKeyPress, false)\n  }\n\n  shouldComponentUpdate(nextProps: IEpubViewProps) {\n    return (\n      !this.state.isLoaded ||\n      nextProps.location !== this.props.location ||\n      nextProps.url !== this.props.url\n    )\n  }\n\n  componentDidUpdate(prevProps: IEpubViewProps) {\n    if (\n      prevProps.location !== this.props.location &&\n      this.location !== this.props.location\n    ) {\n      this.rendition?.display(this.props.location + '')\n    }\n    if (prevProps.url !== this.props.url) {\n      this.initBook()\n    }\n  }\n\n  initReader() {\n    const { toc } = this.state\n    const { location, epubOptions, getRendition } = this.props\n    if (this.viewerRef.current) {\n      const node = this.viewerRef.current\n      if (this.book) {\n        const rendition = this.book.renderTo(node, {\n          width: '100%',\n          height: '100%',\n          ...epubOptions,\n        })\n        this.rendition = rendition\n        this.prevPage = () => {\n          rendition.prev()\n        }\n        this.nextPage = () => {\n          rendition.next()\n        }\n        this.registerEvents()\n        getRendition && getRendition(rendition)\n\n        if (typeof location === 'string' || typeof location === 'number') {\n          rendition.display(location + '')\n        } else if (toc.length > 0 && toc[0].href) {\n          rendition.display(toc[0].href)\n        } else {\n          rendition.display()\n        }\n      }\n    }\n  }\n\n  registerEvents() {\n    const { handleKeyPress, handleTextSelected } = this.props\n    if (this.rendition) {\n      this.rendition.on('locationChanged', this.onLocationChange)\n      this.rendition.on('keyup', handleKeyPress || this.handleKeyPress)\n      if (handleTextSelected) {\n        this.rendition.on('selected', handleTextSelected)\n      }\n    }\n  }\n\n  onLocationChange = (loc: Location) => {\n    const { location, locationChanged } = this.props\n    const newLocation = `${loc.start}`\n    if (location !== newLocation) {\n      this.location = newLocation\n      locationChanged && locationChanged(newLocation)\n    }\n  }\n\n  renderBook() {\n    const { epubViewStyles = defaultStyles } = this.props\n    return <div ref={this.viewerRef} style={epubViewStyles.view} />\n  }\n\n  handleKeyPress = (event: KeyboardEvent) => {\n    if (event.key === 'ArrowRight' && this.nextPage) {\n      this.nextPage()\n    }\n    if (event.key === 'ArrowLeft' && this.prevPage) {\n      this.prevPage()\n    }\n  }\n\n  render() {\n    const { isLoaded } = this.state\n    const { loadingView = null, epubViewStyles = defaultStyles } = this.props\n    return (\n      <div style={epubViewStyles.viewHolder}>\n        {(isLoaded && this.renderBook()) || loadingView}\n      </div>\n    )\n  }\n}\n","import type { CSSProperties } from 'react'\n\nexport interface IReactReaderStyle {\n  container: CSSProperties\n  readerArea: CSSProperties\n  containerExpanded: CSSProperties\n  titleArea: CSSProperties\n  reader: CSSProperties\n  swipeWrapper: CSSProperties\n  prev: CSSProperties\n  next: CSSProperties\n  arrow: CSSProperties\n  arrowHover: CSSProperties\n  tocBackground: CSSProperties\n  toc: CSSProperties\n  tocArea: CSSProperties\n  tocAreaButton: CSSProperties\n  tocButton: CSSProperties\n  tocButtonExpanded: CSSProperties\n  tocButtonBar: CSSProperties\n  tocButtonBarTop: CSSProperties\n  loadingView: CSSProperties\n  tocButtonBottom: CSSProperties\n}\n\nexport const ReactReaderStyle: IReactReaderStyle = {\n  container: {\n    overflow: 'hidden',\n    position: 'relative',\n    height: '100%',\n  },\n  readerArea: {\n    position: 'relative',\n    zIndex: 1,\n    height: '100%',\n    width: '100%',\n    backgroundColor: '#fff',\n    transition: 'all .3s ease',\n  },\n  containerExpanded: {\n    transform: 'translateX(256px)',\n  },\n  titleArea: {\n    position: 'absolute',\n    top: 20,\n    left: 50,\n    right: 50,\n    textAlign: 'center',\n    color: '#999',\n  },\n  reader: {\n    position: 'absolute',\n    top: 50,\n    left: 50,\n    bottom: 20,\n    right: 50,\n  },\n  swipeWrapper: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 200,\n  },\n  prev: {\n    left: 1,\n  },\n  next: {\n    right: 1,\n  },\n  arrow: {\n    outline: 'none',\n    border: 'none',\n    background: 'none',\n    position: 'absolute',\n    top: '50%',\n    marginTop: -32,\n    fontSize: 64,\n    padding: '0 10px',\n    color: '#E2E2E2',\n    fontFamily: 'arial, sans-serif',\n    cursor: 'pointer',\n    userSelect: 'none',\n    appearance: 'none',\n    fontWeight: 'normal',\n  },\n  arrowHover: {\n    color: '#777',\n  },\n  toc: {},\n  tocBackground: {\n    position: 'absolute',\n    left: 256,\n    top: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 1,\n  },\n  tocArea: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    bottom: 0,\n    zIndex: 0,\n    width: 256,\n    overflowY: 'auto',\n    WebkitOverflowScrolling: 'touch',\n    background: '#f2f2f2',\n    padding: '10px 0',\n  },\n  tocAreaButton: {\n    userSelect: 'none',\n    appearance: 'none',\n    background: 'none',\n    border: 'none',\n    display: 'block',\n    fontFamily: 'sans-serif',\n    width: '100%',\n    fontSize: '.9em',\n    textAlign: 'left',\n    padding: '.9em 1em',\n    borderBottom: '1px solid #ddd',\n    color: '#aaa',\n    boxSizing: 'border-box',\n    outline: 'none',\n    cursor: 'pointer',\n  },\n  tocButton: {\n    background: 'none',\n    border: 'none',\n    width: 32,\n    height: 32,\n    position: 'absolute',\n    top: 10,\n    left: 10,\n    borderRadius: 2,\n    outline: 'none',\n    cursor: 'pointer',\n  },\n  tocButtonExpanded: {\n    background: '#f2f2f2',\n  },\n  tocButtonBar: {\n    position: 'absolute',\n    width: '60%',\n    background: '#ccc',\n    height: 2,\n    left: '50%',\n    margin: '-1px -30%',\n    top: '50%',\n    transition: 'all .5s ease',\n  },\n  tocButtonBarTop: {\n    top: '35%',\n  },\n  tocButtonBottom: {\n    top: '66%',\n  },\n  loadingView: {\n    position: 'absolute',\n    top: '50%',\n    left: '10%',\n    right: '10%',\n    color: '#ccc',\n    textAlign: 'center',\n    marginTop: '-.5em',\n  },\n}\n","import React, { type CSSProperties, PureComponent, type ReactNode } from 'react'\nimport { type SwipeableProps, useSwipeable } from 'react-swipeable'\nimport { EpubView, type IEpubViewStyle, type IEpubViewProps } from '..'\nimport {\n  ReactReaderStyle as defaultStyles,\n  type IReactReaderStyle,\n} from './style'\nimport { type NavItem } from 'epubjs'\n\ntype SwipeWrapperProps = {\n  children: ReactNode\n  swipeProps: Partial<SwipeableProps>\n}\n\nconst SwipeWrapper = ({ children, swipeProps }: SwipeWrapperProps) => {\n  const handlers = useSwipeable(swipeProps)\n  return <div {...handlers}>{children}</div>\n}\n\ntype TocItemProps = {\n  data: NavItem\n  setLocation: (value: string) => void\n  styles?: CSSProperties\n}\n\nconst TocItem = ({ data, setLocation, styles }: TocItemProps) => (\n  <div>\n    <button onClick={() => setLocation(data.href)} style={styles}>\n      {data.label}\n    </button>\n    {data.subitems && data.subitems.length > 0 && (\n      <div style={{ paddingLeft: 10 }}>\n        {data.subitems.map((item, i) => (\n          <TocItem\n            key={i}\n            data={item}\n            styles={styles}\n            setLocation={setLocation}\n          />\n        ))}\n      </div>\n    )}\n  </div>\n)\n\nexport type IReactReaderProps = IEpubViewProps & {\n  title?: string\n  showToc?: boolean\n  readerStyles?: IReactReaderStyle\n  epubViewStyles?: IEpubViewStyle\n  swipeable?: boolean\n}\n\ntype IReactReaderState = {\n  isLoaded: boolean\n  expandedToc: boolean\n  toc: NavItem[]\n}\n\nexport class ReactReader extends PureComponent<\n  IReactReaderProps,\n  IReactReaderState\n> {\n  state: Readonly<IReactReaderState> = {\n    isLoaded: false,\n    expandedToc: false,\n    toc: [],\n  }\n  readerRef = React.createRef<EpubView>()\n  constructor(props: IReactReaderProps) {\n    super(props)\n  }\n  toggleToc = () => {\n    this.setState({\n      expandedToc: !this.state.expandedToc,\n    })\n  }\n\n  next = () => {\n    const node = this.readerRef.current\n    if (node && node.nextPage) {\n      node.nextPage()\n    }\n  }\n\n  prev = () => {\n    const node = this.readerRef.current\n    if (node && node.prevPage) {\n      node.prevPage()\n    }\n  }\n\n  onTocChange = (toc: NavItem[]) => {\n    const { tocChanged } = this.props\n    this.setState(\n      {\n        toc: toc,\n      },\n      () => tocChanged && tocChanged(toc)\n    )\n  }\n\n  renderToc() {\n    const { toc, expandedToc } = this.state\n    const { readerStyles = defaultStyles } = this.props\n    return (\n      <div>\n        <div style={readerStyles.tocArea}>\n          <div style={readerStyles.toc}>\n            {toc.map((item, i) => (\n              <TocItem\n                data={item}\n                key={i}\n                setLocation={this.setLocation}\n                styles={readerStyles.tocAreaButton}\n              />\n            ))}\n          </div>\n        </div>\n        {expandedToc && (\n          <div style={readerStyles.tocBackground} onClick={this.toggleToc} />\n        )}\n      </div>\n    )\n  }\n\n  setLocation = (loc: string) => {\n    const { locationChanged } = this.props\n    this.setState(\n      {\n        expandedToc: false,\n      },\n      () => locationChanged && locationChanged(loc)\n    )\n  }\n\n  renderTocToggle() {\n    const { expandedToc } = this.state\n    const { readerStyles = defaultStyles } = this.props\n    return (\n      <button\n        style={Object.assign(\n          {},\n          readerStyles.tocButton,\n          expandedToc ? readerStyles.tocButtonExpanded : {}\n        )}\n        onClick={this.toggleToc}\n      >\n        <span\n          style={Object.assign(\n            {},\n            readerStyles.tocButtonBar,\n            readerStyles.tocButtonBarTop\n          )}\n        />\n        <span\n          style={Object.assign(\n            {},\n            readerStyles.tocButtonBar,\n            readerStyles.tocButtonBottom\n          )}\n        />\n      </button>\n    )\n  }\n\n  render() {\n    const {\n      title,\n      showToc = true,\n      loadingView,\n      readerStyles = defaultStyles,\n      locationChanged,\n      swipeable,\n      epubViewStyles,\n      ...props\n    } = this.props\n    const { toc, expandedToc } = this.state\n    return (\n      <div style={readerStyles.container}>\n        <div\n          style={Object.assign(\n            {},\n            readerStyles.readerArea,\n            expandedToc ? readerStyles.containerExpanded : {}\n          )}\n        >\n          {showToc && this.renderTocToggle()}\n          <div style={readerStyles.titleArea}>{title}</div>\n          <SwipeWrapper\n            swipeProps={{\n              onSwipedRight: this.prev,\n              onSwipedLeft: this.next,\n              trackMouse: true,\n            }}\n          >\n            <div style={readerStyles.reader}>\n              <EpubView\n                ref={this.readerRef}\n                loadingView={\n                  loadingView === undefined ? (\n                    <div style={readerStyles.loadingView}>Loading…</div>\n                  ) : (\n                    loadingView\n                  )\n                }\n                epubViewStyles={epubViewStyles}\n                {...props}\n                tocChanged={this.onTocChange}\n                locationChanged={locationChanged}\n              />\n              {swipeable && <div style={readerStyles.swipeWrapper} />}\n            </div>\n          </SwipeWrapper>\n          <button\n            style={Object.assign({}, readerStyles.arrow, readerStyles.prev)}\n            onClick={this.prev}\n          >\n            ‹\n          </button>\n          <button\n            style={Object.assign({}, readerStyles.arrow, readerStyles.next)}\n            onClick={this.next}\n          >\n            ›\n          </button>\n        </div>\n        {showToc && toc && this.renderToc()}\n      </div>\n    )\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}